-----

# 🏎️ AutoRacer Course Maker

自動運転ミニカーバトル用のカスタムコース図を作成するためのWebアプリケーションです。

本ツールはDockerコンテナ上で動作するため、チームメンバー全員が同じ環境（Node.js, ライブラリバージョン）で作業できます。

## ⚙️ 基本情報

| 項目 | 詳細 | 備考 |
| :--- | :--- | :--- |
| **コース寸法 (W x H)** | 1000cm × 546cm | 横長固定 |
| **レーン幅** | 1.5cm (初期値は操作性の問題から15cmとしている。) | |
| **実行環境** | Docker Compose | Windows, Mac, Linuxで共通 |
| **アクセスURL** | `http://localhost:5173` | |

-----

## 🚀 環境構築と起動手順

### 1\. 事前準備

PCに **Git** および **Docker Desktop** がインストールされ、起動していることを確認してください。

### 2\. リポジトリのクローン

以下のコマンドでプロジェクトをダウンロードします。

```bash
git clone https://github.com/samatsum/CourceMaker.git
cd CourceMaker
```

### 3\. 環境の構築と起動

`docker-compose.yml` に基づき、Webアプリ環境が自動で構築・起動します。

```bash
docker compose up -d
```

> **💡 [補足]** 初回起動時は、`package-lock.json` に基づいて必要なライブラリが自動でインストールされるため、時間がかかります。

### 4\. アプリケーションへのアクセス

ブラウザを開き、以下のURLにアクセスしてください。

```
http://localhost:5173
```

-----

## 🕹️ 主な機能と使い方

コース図作成ソフトは、コース図エリアの\*\*左側にある「パーツ置き場」\*\*からパーツをドラッグ＆ドロップして使用します。

### 1\. パーツ追加と管理

| ボタン | 長さ | カウンター | 出現場所 |
| :--- | :--- | :--- | :--- |
| **＋黄 (N)** | 120cm | 現在の黄色パーツ数を2桁表示 | パレット上段 |
| **＋青 (N)** | 60cm | 現在の青色パーツ数を2桁表示 | パレット中段 |
| **＋緑 (N)** | 42cm | 現在の緑色パーツ数を2桁表示 | パレット下段 |

### 2\. 編集操作

| 機能 | 使い方 | 備考 |
| :--- | :--- | :--- |
| **ドラッグ** | パーツの中心（黒丸）を掴んで移動させます。 | **ドラッグ中のパーツは常に最前面に表示されます。** |
| **コピペ** | 選択中のパーツを20cmずらした位置に複製します。 | |
| **↻ 1°, 10°, 45°, 90°** | 選択中のパーツを、中心を基準に回転させます。 | |
| **🔒 固定 〇/×** | 選択中のパーツの移動・回転・削除をロックします。 | **固定されたパーツとのみ衝突チェックが有効**になります。 |
| **削除モード: 〇/×** | **〇**にすると、クリックするだけで固定されていないパーツを即座に削除できます。 | |

### 3\. 衝突判定の仕様

  * **衝突判定の対象:** ドラッグ中のパーツと、**固定されているパーツ**のみ。
  * **非固定パーツ同士:** 自由に重ねて配置可能です。
  * **判定方法:** レーンが回転していても正確に判定できる \*\*SAT（分離軸判定法）\*\*を採用しています。

### 4\. コース図の出力（画像保存）

  * **ボタン:** `📷 コース図保存 (.jpg)` (赤色ボタン)
  * **機能:** 左側の「パーツ置き場」を除外した、\*\*コース図エリア（1000cm x 546cm）\*\*のみをJPEG画像として保存します。
  * **ファイル名:** `course-layout_YYYYMMDD_HHMMSS.jpg` の形式で日時が自動付与されます。

-----

